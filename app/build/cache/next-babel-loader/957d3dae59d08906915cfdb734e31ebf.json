{"ast":null,"code":"\"use strict\";\n\nvar _tokenService = _interopRequireDefault(require(\"../services/token-service\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst agent = require(\"./agent\");\n\nasync function registerAccount(user) {\n  return agent.get().post(\"/api/user/register\", {\n    user\n  }).then(resp => resp.data);\n}\n\nasync function login(user) {\n  return agent.get().post(\"/api/user/login\", {\n    user\n  }).then(resp => resp.data);\n}\n\nasync function postRefreshToken() {\n  let respJson = await agent.get().post(\"/api/user/refresh\").then(resp => resp.data);\n\n  _tokenService.default.saveAuthToken(respJson.authToken);\n\n  _tokenService.default.queueCallbackBeforeExpiry(async () => {\n    await this.postRefreshToken();\n  });\n\n  return respJson;\n}\n\nmodule.exports = {\n  registerAccount,\n  login,\n  postRefreshToken\n};","map":null,"metadata":{},"sourceType":"script"}